# FAT 文件系统检测工具

一个极简图形化小工具，用于在无 CMD 或 Shell 受限的系统（如 Win7 精简版）中查看 FAT 分区类型。
（当前仅支持 FAT12 / FAT16 / FAT32，不支持 其他文件系统。）
用法：`fatdetect.exe D`

---

## 说明

本工具调用 Windows API `GetVolumeInformationA` 和 `GetDiskFreeSpaceA` 获取目标盘符的文件系统名称与簇总数，并按以下常见阈值显示结果：

- 簇数 < 4085 → 显示为 FAT12  
- 4085 ≤ 簇数 ≤ 65524 → 显示为 FAT16  
- 簇数 > 65524 → 显示为 FAT32  

这些数值源自微软早期 FAT 规范文档，仅作兼容性参考。

在 **使用 DiskGenius 扩容 FAT12 分区** 的场景中，曾出现容量约 255.47 MiB 的分区。
对此，**GPT 曾给出如下分析**：

> “当 BytesPerSector=512 且 SecPerClus=128 时，FAT12 的理论上限容量约为：  
> 4084 × 128 × 512 ≈ 267,649,024 bytes ≈ 255.25 MiB。  
> 你扩容到 ≈255.465 MiB，与阈值非常接近。任何 BPB 中的微小差别或取整行为（RootDir 向上取整、FATsz 读法等）都会使 ClusterCount 落到 4085 或 4086，从而把卷‘从合法 FAT12 推到 FAT16’。所以 255MB 处是天然的临界点。”

因此，此类分区即使 BPB 标签仍为 "FAT12"，实际簇数可能已进入 FAT16 范围。本工具据此显示结果，**但不保证与 DiskGenius、操作系统或其他工具一致**。

---

## 免责声明

本工具 **仅用于技术整活、个人测试或学习研究**，**不得用于生产环境、数据恢复、司法鉴定、商业用途或任何可能产生实际后果的场景**。

开发者不对因使用或误用本工具所导致的任何数据丢失、系统异常、判断错误或其它损失承担责任。  
一切结果仅供参考，**请勿当作权威依据**。

---

## 编译

使用 MinGW（如 Dev-C++）编译：
```bash
gcc fatdetect.c -o fatdetect.exe -mwindows -static
