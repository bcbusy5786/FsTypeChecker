# FsTypeChecker
文件系统检查器，能在部分情况（诸如Shell功能受限）检测文件系统类型

**功能：**
用于检测文件系统

暂时仅支持FAT文件系统（不包含exFAT）

**提示：**
FAT12和FAT16的边界性是参照微软白皮书进行界定的，检测方法是按照白皮书给划定的界限进行判断的。该界限的讨论是在多个AI间的讨论得出的。仅作参考。

**确定 FAT 类型（微软原文翻译）**
FAT 类型由卷上的簇（cluster）数量决定（而非由扇区数量或字节大小决定）。
请使用以下规则来确定 FAT 类型：
如果簇的数量 小于 4,085，则该卷 应格式化为 FAT12。
如果簇的数量 在 4,085 至 65,524 之间（含），则该卷 应格式化为 FAT16。
如果簇的数量 大于 65,524，则该卷 必须格式化为 FAT32。
注：Microsoft 保留未来更改这些阈值的权利。但当前版本的 MS-DOS 和 Windows 系统均强制执行上述限制。

**例外情况**
DiskGenius在扩容FAT12分区后，大小为255.47MB，但是该工具会判断为FAT16。
事实上，如果动用十六进制修改结构中的FAT16字样为FAT12，那么DiskGenius会判断为FAT12，但实际上为FAT16。因此，扩容后最大的255.47已经被划定到FAT16分区里面了，实际最大大小为255.25[1]，此类微小差距会造成二者判断结果出现差异。我们无法确定究竟谁对，但还是依照白皮书吧……

**编译：**
使用Dev-C++进行编译。


**注释：**
[1]：GPT判断：”当 BytesPerSector=512 且 SecPerClus=128 时 FAT12 的理论上限容量约为：
4084 × 128 × 512 ≈ 267,649,024 bytes ≈ 255.25 MiB
你扩容到 ≈255.465 MiB，与阈值非常接近。任何 BPB 中的微小差别或取整行为（RootDir 向上取整、FATsz 读法等）都会使 ClusterCount 落到 4085 或 4086，从而把卷“从合法 FAT12 推到 FAT16”。所以 255MB 处是天然的临界点。”
