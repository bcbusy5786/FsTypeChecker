# FAT 文件系统检测工具

一款轻量级图形化工具，用于准确识别 FAT 文件系统类型。  
特别适用于 **Shell 功能受限** 的环境（如精简版 Win7、无 CMD 系统等）。

> ✅ **无需 CMD / PowerShell / 管理员权限**  
> ✅ **纯图形界面，双击即用**  
> ✅ **静态编译，零运行时依赖**

---

## 🔍 功能特点

- 准确识别 **FAT12 / FAT16 / FAT32**
- 判断依据：**实际簇（Cluster）数量**（非 BPB 标签或总容量）
- 支持命令行指定盘符：`fatdetect.exe D`
- 兼容 **Windows NT 3.1 ~ Windows 7**（含 181MB 极致精简版）

> ⚠️ **暂不支持 exFAT、NTFS 等其他文件系统**

---

## 📏 判定标准（依据微软官方文档）

> 文件系统类型由卷上的 **簇数量** 决定，**而非扇区数、字节数或 BPB 中的字符串**。

|
 簇数量范围         
|
 文件系统 
|
|
--------------------
|
----------
|
|
 小于 4,085         
|
 FAT12    
|
|
 4,085 ～ 65,524（含）
|
 FAT16    
|
|
 大于 65,524        
|
 FAT32    
|

> ℹ️ *微软保留未来修改阈值的权利，但当前所有 MS-DOS 和 Windows 系统均强制执行上述规则。*

---

## ⚖️ 经典边界案例：255.25 MiB 临界点

存在一个广为人知的临界情况：

- **FAT12 理论最大容量**：  
  `4,084 簇 × 128 扇区/簇 × 512 字节 = ≈255.25 MiB`
- 若通过 DiskGenius 将分区扩容至 **≈255.47 MiB**，实际簇数会变为 **4,086**
- **结果**：该卷 **必须为 FAT16** —— 即使 BPB 中仍写着 `"FAT12   "`

> 🔄 **DiskGenius 可能显示“FAT12”**，因为它只读取 BPB 标签，**未验证实际簇数**。  
> ✅ **本工具按微软规范计算**，结果更可靠。

因此，在 255 MiB 附近，**DG 显示 FAT12 ≠ 实际是 FAT12**。我们选择 **相信规范，而非标签**。

---

## 🛠️ 编译方法

使用 **Dev-C++（MinGW）** 编译：

```bash
gcc fatdetect.c -o fatdetect.exe -mwindows -static
